<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>运动员</title>
    <link type="text/css" href="css/common.css" rel="stylesheet"/>
    <script type="application/javascript" src="js/jquery-2.1.1.min.js"></script>
    <script type="application/javascript" src="js/common.js"></script>
</head>
<body>
<div class="top_bar">
    <div class="top_bar back_btn">
        <span class="s1">返</span>
        <span class="s2">回</span>
    </div>
</div>
<div class="main_body config_players">
    <div class="players_name_list">
        <ul class="names_list">
            <!--<li>
                <div class="names_list name">
                    <span style="color: #0388b5">内马尔</span>
                    <img src="img/player_name_selected.jpg" style="position: relative; right: 14px;float: right;">
                </div>
                <hr class="divider_of_names_list"/>
            </li>
            <li>
                <div class="names_list name">
                    <span style="color: black">内马尔</span>
                    <img src="img/player_name_not_selected.jpg" style="position: relative; right: 14px;float: right;">
                </div>
                <hr class="divider_of_names_list"/>
            </li>
            <li>
                <div class="add_player_btn">
                    <img src="img/add_btn.jpg" style="position: relative; left: -85px; top: 6px;">
                    <span style="color: black;float: left;position: relative;top: 10px;left: 41px;">点击添加更多</span>
                </div>
            </li>-->
        </ul>
    </div>

    <div class="player_detail">
        <!--<img src="img/neymar.jpg" class="player_avatar">
        <table class="player_detail">
            <tr class="table_header">
                <td class="attr">
                    <span>姓名</span>
                </td>
                <td class="value">
                    <span>内马尔</span>
                </td>
            </tr>
            <tr class="table_body">
                <td class="attr">
                    <span>性别</span>
                </td>
                <td class="value">
                    <span>男</span>
                </td>
            </tr>
            <tr class="table_body">
                <td class="attr">
                    <span>身高</span>
                </td>
                <td class="value">
                    <span>175cm</span>
                </td>
            </tr>
            <tr class="table_body">
                <td class="attr">
                    <span>体重</span>
                </td>
                <td class="value">
                    <span>64kg</span>
                </td>
            </tr>
            <tr class="table_body">
                <td class="attr">
                    <span>位置</span>
                </td>
                <td class="value">
                    <span>前锋</span>
                </td>
            </tr>
            <tr class="table_body">
                <td class="attr">
                    <span>设备编号</span>
                </td>
                <td class="value">
                    <span>432452234</span>
                </td>
            </tr>
        </table>-->
    </div>
</div>

<script type="application/javascript">
    $(document).ready(function() {
        //alert("window h: " + $(window).height() + ", window w: " + $(window).width() + ", doc h: " + $(document).height() + ", doc w: " + $(document).width() + ", screen h: " + screen.height + ", screen w: " + screen.width);

        $("div.top_bar.back_btn").click(function () {
            console.log("Go back clicked!");
        });

        loadPlayers(function(players) {
            console.log(players.length + " players");

            //clear remark data, avoid error
            localStorage.clear();

            //left side list
            var selectIndex = -1;
            players.forEach(function (p, i, arr) {
                var li = document.createElement('li');

                var div = document.createElement('div');
                div.setAttribute("class", "names_list name");
                var span = document.createElement('span');
                span.setAttribute("class", "name");
                span.innerHTML = p.name;
                var img = document.createElement('img');
                img.setAttribute("style", "position: relative; float: right;");
                if (selectIndex == i) {
                    span.setAttribute("style", "color: #0388b5");
                    img.setAttribute("src", "img/player_name_selected.jpg");
                } else {
                    span.setAttribute("style", "color: black");
                    img.setAttribute("src", "img/player_name_not_selected.jpg");
                }
                div.appendChild(span);
                div.appendChild(img);
                div.onclick = function () {
                    if (selectIndex != -1) {
                        $("ul.names_list")[0].children[selectIndex].children[0].children[0].style.color = "black";
                        $("ul.names_list")[0].children[selectIndex].children[0].children[1].src = "img/player_name_not_selected.jpg";
                    }

                    selectIndex = i;
                    span.setAttribute("style", "color: #0388b5");
                    img.setAttribute("src", "img/player_name_selected.jpg");
                    if ($("div.player_detail img.player_avatar").length == 0) {
                        var avatar = document.createElement("img");
                        avatar.setAttribute("src", p.detailinfo.avatar);
                        avatar.setAttribute("class", "player_avatar");
                        $("div.player_detail").append(avatar);

                        var table = createPlayerDetailTable(p);
                        $("div.player_detail").append(table);
                    } else {
                        var avatar = $("div.player_detail img.player_avatar")[0];
                        avatar.src = p.detailinfo.avatar;
                        var table = $("table.player_detail")[0];
                        changePlayerDetailTable(table, p);
                    }
                };

                var hr = document.createElement('hr');
                hr.setAttribute("class", "divider_of_names_list");

                li.appendChild(div);
                li.appendChild(hr);
                $("ul.names_list").append(li);
            });
            var li = document.createElement('li');

            var div = document.createElement('div');
            div.setAttribute("class", "add_player_btn");
            var img = document.createElement('img');
            img.setAttribute("src", "img/add_btn.jpg");
            img.setAttribute("style", "position: relative; left: -85px; top: 6px;");
            var span = document.createElement('span');
            span.innerHTML = "点击添加更多";
            span.setAttribute("style", "color: black;float: left;position: relative;top: 10px;left: 41px;");
            div.appendChild(img);
            div.appendChild(span);
            li.appendChild(div);
            $("ul.names_list").append(li);
            $("div.add_player_btn").click(function () {
                console.log("add player clicked!");
            });
        }, function() {
            console.log("Error happened");
        });
    });
</script>
</body>
</html>